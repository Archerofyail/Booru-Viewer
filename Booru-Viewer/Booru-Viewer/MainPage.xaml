<Page
	x:Class="Booru_Viewer.MainPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="using:Booru_Viewer"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:vm1="using:Booru_Viewer.ViewModels"
	mc:Ignorable="d"
	>
	<Page.DataContext>
		<vm1:MainPageViewModel></vm1:MainPageViewModel>
	</Page.DataContext>
	<Page.Resources>
		<ResourceDictionary>
			<DataTemplate x:Name="ImageTemplate">
				<Image Name="Image"></Image>
			</DataTemplate>
			<DataTemplate x:Name="Tag">
				<StackPanel Orientation="Horizontal">
					<TextBlock Name="Tag"
						   Text="{Binding CurrentTags}"/>
					<Button Command="{Binding RemoveTag}">
						<SymbolIcon Symbol="Cancel"
									/>
					</Button>
				</StackPanel>
			</DataTemplate>
		</ResourceDictionary>
	</Page.Resources>

	<GridView SelectionChanged="GridView_SelectionChanged"
			  Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
			  ItemTemplate="{StaticResource ImageTemplate}"
			  ItemsSource="{Binding Path=ImageLinks}"
			  SelectionMode="None">

	</GridView>

	<Page.BottomAppBar>
		<CommandBar VerticalAlignment="Bottom">
			<CommandBar.PrimaryCommands>
				<AppBarButton Label="Search" Icon="Find">
					<AppBarButton.Flyout>
						<Flyout x:Name="SearchFlyout">
							<StackPanel Orientation="Vertical">
								<TextBlock Text="Add tags"></TextBlock>
								<StackPanel Orientation="Horizontal">
									<TextBox PlaceholderText="Tag"
											 Name="TagTextBox"
								 MinWidth="300"/>
									<Button Name="AddTagButton" 
											Margin="5, 0, 0, 0"
											Background="{ThemeResource SystemControlBackgroundAccentBrush}" 
											Foreground="White"
											Click="AddTagClicked"
											Command="{Binding AddTag}">
										<Button.Content>
											<SymbolIcon>Add</SymbolIcon>
										</Button.Content>
									</Button>

								</StackPanel>
								<GridView ItemsSource="{Binding Path=CurrentTags, Mode=OneWay}"
										  ItemTemplate="{StaticResource Tag}"/>
								<Button MinWidth="350" HorizontalAlignment="Center"
										Background="{ThemeResource SystemControlBackgroundAccentBrush}" 
										Foreground="White"
										Click="SearchClicked">
									<Button.Content>
										<SymbolIcon>Find</SymbolIcon>
									</Button.Content>
								</Button>
							</StackPanel>
						</Flyout>
					</AppBarButton.Flyout>
				</AppBarButton>
				<AppBarButton Label="Settings" Icon="Setting"/>

			</CommandBar.PrimaryCommands>
		</CommandBar>
	</Page.BottomAppBar>
</Page>
